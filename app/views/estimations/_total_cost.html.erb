<div id="total_cost_block">
  <div class="row">
    <div class="col-lg-12">
      <div class="ibox ">
        <div class="ibox-title">
            <h5 style="font-size: x-large; color: red;">Total Cost</h5>
            <div class="ibox-tools">
                <a class="collapse-link">
                    <i class="fa fa-chevron-up"></i>
                </a>
            </div>
        </div>
        <div class="ibox-content custom-ibox">
          <div class="row">
            <div class="col-lg-2" style="color: red;">
              Reuse Factor(%)
            </div>
            <div class="col-lg-2">
              Estimated Total
            </div>
            <div class="col-lg-2">
              Overridden Total
            </div>
            <div class="col-lg-3" style="color: red;">
              Free Hours
            </div>
            <div class="col-lg-3">
              Final Hours
            </div>
          </div>
        </div>
        <div class="ibox-content custom-ibox">
          <div class="row">

            <div class="col-lg-2">
              <%= number_field_tag 'estimation_templates[reuse_factor]', 25, :class =>  "form-control", :id => 'reuse_factor', :placeholder => 'Reuse Factor', style: 'background-color: lightgreen' %>
            </div>
            <div class="col-lg-2">
              <%= number_field_tag 'estimation_templates[estimated_total]', @estimated_total_cost, :class =>  "form-control", :id => 'estimated_total', :placeholder => 'Estimated Total', readonly: true, style: 'background-color: lightpink;' %>
            </div>
            <div class="col-lg-2">
              <%= number_field_tag 'estimation_templates[overridden_total]', 0, :class =>  "form-control", :id => 'overridden_total', :placeholder => 'Overridden Total', readonly: true, style: 'background-color: lightpink;' %>
            </div>
            <div class="col-lg-3">
              <%= number_field_tag 'estimation_templates[offer_total]', 0, :class =>  "form-control", :id => 'offer_total', :placeholder => 'Offer', readonly: true, style: 'background-color: lightgreen' %>
            </div>
            <% reuse_total = (25.to_f * (@overridden_total_cost - @offer_total).to_f) / 100 %>
            <% final_hours = (@overridden_total_cost - @offer_total - reuse_total).to_i %>
            <div class="col-lg-3">
              <%= number_field_tag 'estimation_templates[final_hours]', final_hours, :class =>  "form-control", :id => 'final_hours', :placeholder => 'Final Hours', readonly: true, style: 'background-color: lightskyblue;' %>
            </div>
            
          </div>
        </div>


        <div class="ibox-content custom-ibox">
          <div class="row">
            <%
             other_team = @overridden_total_cost * 19
             ui_garage = final_hours * 15
             savings = (other_team - ui_garage)
            %>
            <div class="col-lg-4">
              <%= text_field_tag 'estimation_templates[dev_cost_other_team]', "", :class =>  "form-control custom-input", :id => 'dev_cost_other_team', :placeholder => 'Dev Cost', style: 'background-color: lightpink' %>
            </div>

            <div class="col-lg-4">
              <%= text_field_tag 'estimation_templates[dev_cost_ui_garage]', "Development Cost from UI Garage : $#{ui_garage}", :class =>  "form-control custom-input", :id => 'dev_cost_ui_garage', :placeholder => 'Dev Cost UI Garage', style: 'background-color: lightgreen' %>
            </div>

            <div class="col-lg-4">
              <%= text_field_tag 'estimation_templates[total_savings]', "Total Savings : $#{savings}", :class =>  "form-control custom-input", :id => 'total_savings', :placeholder => 'Savings', style: 'background-color: lightgreen' %>
            </div>

          </div>
        </div>


      </div>
    </div>
  </div>
</div>